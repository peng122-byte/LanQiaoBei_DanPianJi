C51 COMPILER V9.59.0.0   LED                                                               02/05/2026 23:33:34 PAGE 1   


C51 COMPILER V9.59.0.0, COMPILATION OF MODULE LED
OBJECT MODULE PLACED IN .\Objects\LED.obj
COMPILER INVOKED BY: D:\keilc51\C51\BIN\C51.EXE ..\Driver\LED.c OPTIMIZE(8,SPEED) BROWSE INCDIR(..\Driver) DEBUG OBJECTE
                    -XTEND PRINT(.\Listings\LED.lst) TABS(2) OBJECT(.\Objects\LED.obj)

line level    source

   1          #include "LED.H"
   2          
   3          idata unsigned char temp_1 = 0x00;
   4          idata unsigned char temp_1_old = 0xff;
   5          //ucLed是且只能是0或1
   6          void Led_Disp(unsigned char *ucLed)
   7          {
   8   1        unsigned char temp;
   9   1        temp_1 = 0x00;
  10   1        temp_1 = (ucLed[0]<<0)|(ucLed[1]<<1)|(ucLed[2]<<2)|(ucLed[3]<<3)|
  11   1        (ucLed[4]<<4)|(ucLed[5]<<5)|(ucLed[6]<<6)|(ucLed[7]<<7);
  12   1        //当LED状态发生变化
  13   1        if(temp_1 != temp_1_old)
  14   1        {
  15   2          P0 = ~temp_1;
  16   2          
  17   2          temp = P2 & 0x1f;
  18   2          temp = temp|0x80;
  19   2          P2 = temp;
  20   2          temp = P2 & 0x1f;
  21   2          P2 = temp;
  22   2          
  23   2          temp_1_old = temp_1;
  24   2        }
  25   1      }
  26          
  27          void Led_Off()
  28          {
  29   1        unsigned char temp;
  30   1        
  31   1        P0 = 0xff;
  32   1        
  33   1        temp = P2 & 0x1f;
  34   1        temp = temp|0x80;
  35   1        P2 = temp;
  36   1        temp = P2 & 0x1f;
  37   1        P2 = temp;
  38   1          
  39   1        temp_1_old = 0x00;//关掉后将old变为关闭
  40   1      }
  41          
  42          idata unsigned char temp_2 = 0x00;
  43          idata unsigned char temp_2_old = 0xff;
  44          
  45          void Beep(bit enable)
  46          {
  47   1        unsigned char temp;
  48   1        if(enable)
  49   1        {
  50   2          temp_2 |= 0x40;
  51   2        }else
  52   1        {
  53   2          temp_2 &= (~0x40);
  54   2        }
C51 COMPILER V9.59.0.0   LED                                                               02/05/2026 23:33:34 PAGE 2   

  55   1        if(temp_2 != temp_2_old)
  56   1        {
  57   2          P0 = temp_2;
  58   2          
  59   2          temp = P2 & 0x1f;
  60   2          temp = temp|0xa0;
  61   2          P2 = temp;
  62   2          temp = P2 & 0x1f;
  63   2          P2 = temp;
  64   2          
  65   2          temp_2_old = temp_2;
  66   2        }
  67   1      }
  68          
  69          void Motor(bit enable)
  70          {
  71   1        unsigned char temp;
  72   1        if(enable)
  73   1        {
  74   2          temp_2 |= 0x20;
  75   2        }else
  76   1        {
  77   2          temp_2 &= (~0x20);
  78   2        }
  79   1        if(temp_2 != temp_2_old)
  80   1        {
  81   2          P0 = temp_2;
  82   2          
  83   2          temp = P2 & 0x1f;
  84   2          temp = temp|0xa0;
  85   2          P2 = temp;
  86   2          temp = P2 & 0x1f;
  87   2          P2 = temp;
  88   2          
  89   2          temp_2_old = temp_2;
  90   2        }
  91   1      }
  92          
  93          void Relay(bit enable)
  94          {
  95   1        unsigned char temp;
  96   1        if(enable)
  97   1        {
  98   2          temp_2 |= 0x10;
  99   2        }else
 100   1        {
 101   2          temp_2 &= (~0x10);
 102   2        }
 103   1        if(temp_2 != temp_2_old)
 104   1        {
 105   2          P0 = temp_2;
 106   2          
 107   2          temp = P2 & 0x1f;
 108   2          temp = temp|0xa0;
 109   2          P2 = temp;
 110   2          temp = P2 & 0x1f;
 111   2          P2 = temp;
 112   2          
 113   2          temp_2_old = temp_2;
 114   2        }
 115   1      }

C51 COMPILER V9.59.0.0   LED                                                               02/05/2026 23:33:34 PAGE 3   


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    286    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =      4    ----
   BIT SIZE         =   ----       3
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
