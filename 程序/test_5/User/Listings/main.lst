C51 COMPILER V9.59.0.0   MAIN                                                              07/01/2025 11:12:51 PAGE 1   


C51 COMPILER V9.59.0.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: D:\keilc51\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE INCDIR(..\Driver) DEBUG OBJECTEXTEND PRI
                    -NT(.\Listings\main.lst) TABS(2) OBJECT(.\Objects\main.obj)

line level    source

   1          /*头文件声明区*/
   2          #include <REGX52.H>
   3          #include "Key.h"
   4          #include "Seg.h"
   5          /*变量声明区*/
   6          unsigned char Key_Val,Key_Down,Key_Up,Key_Old;
   7          unsigned char Key_Slow_Down;
   8          unsigned int Seg_Slow_Down;
   9          unsigned char Seg_Pos;
  10          unsigned char Seg_Buf[6]={1,2,3,4,5,6};
  11          unsigned char Seg_Point [6] ={0,1,0,1,0,1};
  12          /*按键处理函数*/
  13          void Key_Proc()
  14          {
  15   1        if(Key_Slow_Down) return;
  16   1        Key_Slow_Down=1;
  17   1        Key_Val= Key_Read();
  18   1        Key_Down= Key_Val & (Key_Old ^ Key_Val);
  19   1        Key_Up= ~ Key_Val & (Key_Old ^ Key_Val);
  20   1        Key_Old=Key_Val;
  21   1        switch (Key_Down)
  22   1        {
  23   2          
  24   2        }
  25   1      }
  26          /*数码管显示函数*/
  27          void Seg_Proc()
  28          {
  29   1        if(Seg_Slow_Down) return;
  30   1        Seg_Slow_Down=1;
  31   1      }
  32          /*其他显示函数*/
  33          void Led_Proc()
  34          {
  35   1        
  36   1      }
  37          /*定时器初始化函数*/
  38          /*定时器初始化函数*/
  39          
  40            void Timer0Init(void)   //1毫秒@12.000MHz
  41          {
  42   1        TMOD &= 0xF0;   //设置定时器模式
  43   1        TMOD |= 0x01;   //设置定时器模式
  44   1        TL0 = 0x18;   //设置定时初始值
  45   1        TH0 = 0xFC;   //设置定时初始值
  46   1        TF0 = 0;    //清除TF0标志
  47   1        TR0 = 1;    //定时器0开始计时
  48   1        ET0=1;
  49   1        EA=1;
  50   1      }
  51          /*定时器0中断服务函数*/
  52          void Timer0Server() interrupt 1
  53          {
  54   1        TL0 = 0x18;   //设置定时初始值
C51 COMPILER V9.59.0.0   MAIN                                                              07/01/2025 11:12:51 PAGE 2   

  55   1        TH0 = 0xFC;   //设置定时初始值
  56   1        if(++Key_Slow_Down==10) Key_Slow_Down=0;
  57   1        if(++Seg_Slow_Down==500) Seg_Slow_Down=0;
  58   1        if(++Seg_Pos==6) Seg_Pos=0;
  59   1        Seg_Disp(Seg_Pos,Seg_Buf[Seg_Pos],Seg_Point[Seg_Pos]);
  60   1      }
  61          /*Main*/
  62          void main()
  63          {
  64   1        Timer0Init();
  65   1        while(1)
  66   1        {
  67   2          Key_Proc;
*** WARNING C275 IN LINE 67 OF main.c: expression with possibly no effect
  68   2          Seg_Proc;
*** WARNING C275 IN LINE 68 OF main.c: expression with possibly no effect
  69   2          Led_Proc;
*** WARNING C275 IN LINE 69 OF main.c: expression with possibly no effect
  70   2        }
  71   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    198    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     20    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  3 WARNING(S),  0 ERROR(S)
